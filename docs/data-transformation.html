<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Energy and Human Development</title>
  <meta name="description" content="Chapter 3 Data transformation | Energy and Human Development" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Energy and Human Development" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Energy and Human Development" />
  
  
  

<meta name="author" content="Antonin Vidon and Jannik Wiedenhaupt" />


<meta name="date" content="2021-12-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Energy and Human Development</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#selecting-the-time-range"><i class="fa fa-check"></i><b>3.1</b> Selecting the time range</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#selecting-the-variables"><i class="fa fa-check"></i><b>3.2</b> Selecting the variables</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#data-transformation-procedure"><i class="fa fa-check"></i><b>3.3</b> Data transformation procedure</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#missing-values-for-the-merged-dataframe"><i class="fa fa-check"></i><b>4.1</b> Missing values for the merged dataframe</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#dive-into-each-primar-dataset-understanding-the-missing-values"><i class="fa fa-check"></i><b>4.2</b> Dive into each primar dataset : understanding the missing values</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#cross-directional-causality-between-energy-consumption-ec-gdp-and-years-of-schooling-yos"><i class="fa fa-check"></i><b>5.1</b> Cross directional causality between energy consumption (EC), GDP and years of schooling (YOS)</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#co-movement-of-energy-consumption-and-hdi"><i class="fa fa-check"></i><b>5.2</b> Co-movement of energy consumption and HDI</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#association-of-human-development-and-renewable-energy"><i class="fa fa-check"></i><b>5.3</b> Association of human development and renewable energy</a></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#characteristics-of-countries-with-a-high-share-of-renewable-energy"><i class="fa fa-check"></i><b>5.4</b> Characteristics of countries with a high share of renewable energy</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a>
<ul>
<li class="chapter" data-level="7.1" data-path="conclusion.html"><a href="conclusion.html#answers"><i class="fa fa-check"></i><b>7.1</b> Answers</a></li>
<li class="chapter" data-level="7.2" data-path="conclusion.html"><a href="conclusion.html#limitations"><i class="fa fa-check"></i><b>7.2</b> Limitations</a></li>
<li class="chapter" data-level="7.3" data-path="conclusion.html"><a href="conclusion.html#future-directions"><i class="fa fa-check"></i><b>7.3</b> Future directions</a></li>
<li class="chapter" data-level="7.4" data-path="conclusion.html"><a href="conclusion.html#summary"><i class="fa fa-check"></i><b>7.4</b> Summary</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Energy and Human Development</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<p>We aim at merging all data into one tidy master data frame within which <strong>each observation will correspond to one country and one year</strong>.</p>
<div id="selecting-the-time-range" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Selecting the time range</h2>
<p>We hope to keep a sufficiently wide range so as to <strong>observe clear change in energy consumption behavior across time</strong>, while at the same time reducing missing data for as many countries as possible.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>We choose to restrict our multivariate analysis to the narrowest time range. This is exactly the intersection of all ranges : <strong>1990-2019</strong>.</p>
<p>We note that this plot <strong>does not tell us anything about missing values</strong>. Indeed, a given observation might be missing although within the time range of the data set.</p>
<hr />
</div>
<div id="selecting-the-variables" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Selecting the variables</h2>
<p>We hope to be able to analyze and understand the cross-correlation between energy consumption and human development. To do so, we need the following:</p>
<ul>
<li>Data indicators for <strong>HDI and all its major components</strong>, namely: <code>GDP</code>, <code>life_expectancy</code>, <code>years_of_schooling</code>;</li>
<li>Figures for <strong>consumption per energy type</strong>;</li>
<li>Population data and other country indicators like geographic region.</li>
</ul>
</div>
<div id="data-transformation-procedure" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Data transformation procedure</h2>
<p>Our data transformation works as follows.</p>
<ol style="list-style-type: decimal">
<li>Determine the needed variables from the respective datasets</li>
<li>Create dataframes for each of the datasets that only contains the needed variables and time frames to avoid having an unnecessarily large final dataframe that would slow down analyses</li>
</ol>
<ul>
<li>Energy data</li>
<li>GDP data</li>
<li>Life expectancy data</li>
<li>Schooling data</li>
<li>Population data</li>
<li>HDI data</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Filter the dataframes on common ISO codes (unique identifiers for countries) such that only countries for which all dataframes match up are selected. We find that there is little to no variance in the countries from the different datasets but that some include geographic regions that are filtered by this procedure as they do not have ISO codes.</li>
<li>Convert previously wide dataframes into a long format such that each row is one unique observation of country and year</li>
<li>Merge all dataframes on their ISO code and year</li>
<li>Add the country names from the library <code>countrycode</code> based on the ISO codes to guarantee a common naming scheme and simplify interpretation.</li>
</ol>
<p>We use the resulting <code>master_df</code> as our database in all further analyses. Of course, we sometimes have to modify or calculate new variables based on the current question.</p>
<table>
<thead>
<tr>
<th style="text-align:left;">
variable
</th>
<th style="text-align:left;">
dataset
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
ISO_code
</td>
<td style="text-align:left;">
worldbank_country_info
</td>
</tr>
<tr>
<td style="text-align:left;">
HDI
</td>
<td style="text-align:left;">
HDI
</td>
</tr>
<tr>
<td style="text-align:left;">
population
</td>
<td style="text-align:left;">
population
</td>
</tr>
<tr>
<td style="text-align:left;">
years_of_schooling
</td>
<td style="text-align:left;">
un_years_of_schooling
</td>
</tr>
<tr>
<td style="text-align:left;">
life_expectancy
</td>
<td style="text-align:left;">
life_expectancy
</td>
</tr>
<tr>
<td style="text-align:left;">
GDP
</td>
<td style="text-align:left;">
worldbank_gdp
</td>
</tr>
<tr>
<td style="text-align:left;">
fossil_fuel
</td>
<td style="text-align:left;">
owid_energy_data
</td>
</tr>
<tr>
<td style="text-align:left;">
hydro
</td>
<td style="text-align:left;">
owid_energy_data
</td>
</tr>
<tr>
<td style="text-align:left;">
low_carb
</td>
<td style="text-align:left;">
owid_energy_data
</td>
</tr>
<tr>
<td style="text-align:left;">
nuclear
</td>
<td style="text-align:left;">
owid_energy_data
</td>
</tr>
<tr>
<td style="text-align:left;">
other_renew
</td>
<td style="text-align:left;">
owid_energy_data
</td>
</tr>
<tr>
<td style="text-align:left;">
renew
</td>
<td style="text-align:left;">
owid_energy_data
</td>
</tr>
<tr>
<td style="text-align:left;">
solar
</td>
<td style="text-align:left;">
owid_energy_data
</td>
</tr>
<tr>
<td style="text-align:left;">
wind
</td>
<td style="text-align:left;">
owid_energy_data
</td>
</tr>
<tr>
<td style="text-align:left;">
coal
</td>
<td style="text-align:left;">
owid_energy_data
</td>
</tr>
<tr>
<td style="text-align:left;">
gas
</td>
<td style="text-align:left;">
owid_energy_data
</td>
</tr>
<tr>
<td style="text-align:left;">
oil
</td>
<td style="text-align:left;">
owid_energy_data
</td>
</tr>
<tr>
<td style="text-align:left;">
biofuel
</td>
<td style="text-align:left;">
owid_energy_data
</td>
</tr>
<tr>
<td style="text-align:left;">
primary
</td>
<td style="text-align:left;">
owid_energy_data
</td>
</tr>
</tbody>
</table>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/AntoninVidon/energyhumandevelopment/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/AntoninVidon/energyhumandevelopment/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
